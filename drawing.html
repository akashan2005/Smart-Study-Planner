<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Study Planner - Drawing & Painting</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }
  video.bg-video {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1;
  }
  .content {
    text-align: center;
    padding: 20px;
    background: rgba(255,255,255,0.85);
    border-radius: 15px;
    max-width: 1000px;
    margin: 20px auto;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
  }
  canvas {
    border: 2px solid #000;
    background: #fff;
    cursor: crosshair;
    border-radius: 10px;
  }
  .drawing-controls {
    margin-bottom: 10px;
  }
  .drawing-controls button, .drawing-controls input {
    margin: 3px;
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
  }
  .drawing-controls button:hover { background: #ddd; }
  .saved-drawings img { max-width: 200px; margin: 10px; border: 2px solid #000; border-radius: 10px; }
  .back-home { display: inline-block; margin-top: 10px; padding: 8px 15px; background:#0077b6;color:#fff;border-radius:8px;text-decoration:none; }
  .back-home:hover { background:#023e8a; }
</style>
</head>
<body>

<video autoplay muted loop class="bg-video">
  <source src="Page.mp4" type="video/mp4">
</video>

<div class="content">
  <h1>🎨 Draw Your Thoughts</h1>
  <div class="drawing-controls">
    <button onclick="setTool('pencil')">✏️ Pencil</button>
    <button onclick="setTool('eraser')">🧽 Eraser</button>
    <button onclick="setTool('line')">📏 Line</button>
    <button onclick="setTool('square')">⬛ Square</button>
    <button onclick="setTool('circle')">⚪ Circle</button>
    <button onclick="setTool('triangle')">🔺 Triangle</button>
    <input type="color" id="color-picker" value="#000000">
    <input type="range" id="thickness" min="1" max="20" value="2">
    <button id="clear-btn">🗑️ Clear</button>
    <button id="save-btn">💾 Save</button>
  </div>
  <canvas id="drawing-canvas" width="800" height="500"></canvas>
  <br>
  <a href="dashboard.html" class="back-home">⬅ Back to Home</a>
  <h2>🖼️ Saved Drawings</h2>
  <div class="saved-drawings" id="savedDrawings"></div>
</div>

<script>
const canvas = document.getElementById('drawing-canvas');
const ctx = canvas.getContext('2d');
let tool = 'pencil';
let drawing = false;
let startX, startY;
let tempImage = null;

function setTool(selectedTool){ tool = selectedTool; }

canvas.addEventListener('mousedown', e=>{
  drawing = true;
  startX = e.offsetX;
  startY = e.offsetY;
  if(tool==='pencil'||tool==='eraser'){ ctx.beginPath(); ctx.moveTo(startX,startY); }
  else { tempImage = ctx.getImageData(0,0,canvas.width,canvas.height); }
});

canvas.addEventListener('mousemove', e=>{
  if(!drawing) return;
  const color = document.getElementById('color-picker').value;
  const thickness = document.getElementById('thickness').value;
  ctx.lineWidth = thickness;
  ctx.lineCap = 'round';
  ctx.strokeStyle = (tool==='eraser')?'#fff':color;
  ctx.fillStyle = color;

  if(tool==='pencil'||tool==='eraser'){
    ctx.lineTo(e.offsetX,e.offsetY);
    ctx.stroke();
  } else {
    ctx.putImageData(tempImage,0,0); // restore background
    const w = e.offsetX - startX;
    const h = e.offsetY - startY;
    if(tool==='line'){ ctx.beginPath(); ctx.moveTo(startX,startY); ctx.lineTo(e.offsetX,e.offsetY); ctx.stroke(); }
    else if(tool==='square'){ ctx.strokeRect(startX,startY,w,h); }
    else if(tool==='circle'){ const r=Math.sqrt(w*w+h*h); ctx.beginPath(); ctx.arc(startX,startY,r,0,2*Math.PI); ctx.stroke(); }
    else if(tool==='triangle'){ ctx.beginPath(); ctx.moveTo(startX,e.offsetY); ctx.lineTo(startX+w/2,startY); ctx.lineTo(e.offsetX,e.offsetY); ctx.closePath(); ctx.stroke(); }
  }
});

canvas.addEventListener('mouseup', e=>{ drawing=false; });

document.getElementById('clear-btn').addEventListener('click', ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); });

document.getElementById('save-btn').addEventListener('click', ()=>{
  const dataURL = canvas.toDataURL("image/png");
  const img = document.createElement('img'); img.src=dataURL;
  const link = document.createElement('a'); link.href=dataURL; link.download="drawing.png"; link.textContent="⬇️ Download";
  const wrapper = document.createElement('div'); wrapper.appendChild(img); wrapper.appendChild(document.createElement('br')); wrapper.appendChild(link);
  document.getElementById('savedDrawings').appendChild(wrapper);
});
</script>

</body>
</html>
