<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Study Planner - Dictionary</title>
<style>
body, html { margin:0; padding:0; height:100%; font-family: Arial, sans-serif; }
video.bg-video { position: fixed; top:0; left:0; width:100%; height:100%; object-fit: cover; z-index:-1; }
.content {
    background: rgba(255,255,255,0.9);
    max-width: 800px; margin: 20px auto; padding: 20px; border-radius: 15px; box-shadow:0 0 15px rgba(0,0,0,0.3);
}
.header { display:flex; justify-content: space-between; align-items:center; }
.menu-icon { cursor:pointer; font-size:24px; }
.sidebar { width:0; position:fixed; top:0; left:0; height:100%; background:#111; overflow-x:hidden; transition:0.3s; padding-top:60px; z-index:10; }
.sidebar a { padding:10px 20px; text-decoration:none; font-size:20px; color:#fff; display:block; transition:0.3s; }
.sidebar a:hover { background:#575757; }
.close-btn { position:absolute; top:10px; right:20px; font-size:36px; }
input, button { margin:5px; padding:8px; border-radius:6px; border:none; font-size:16px; }
button:hover { background:#ddd; cursor:pointer; }
.back-home { display:inline-block; margin-top:10px; padding:8px 15px; background:#0077b6; color:#fff; border-radius:8px; text-decoration:none; }
.back-home:hover { background:#023e8a; }
.dictionary-output { margin-top:20px; font-size:16px; line-height:1.5; }
.dictionary-output h3 { margin:10px 0 5px; }
.dictionary-output p { margin:5px 0; }
</style>
</head>
<body>

<video autoplay muted loop class="bg-video">
    <source src="Page.mp4" type="video/mp4">
</video>

<div class="header">
    <div class="user-info">Welcome, <span id="userName"></span>!</div>
    <div class="menu-icon" onclick="openSidebar()">&#9776;</div>
</div>

<div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="close-btn" onclick="closeSidebar()">&times;</a>
    <a href="dashboard.html">Home</a>
    <a href="profile.html">Profile</a>
    <a href="#" onclick="toggleTheme()">Theme</a>
    <a href="help.html">Help</a>
</div>

<div class="content">
    <h1>Dictionary</h1>
    <div class="dictionary-search">
        <input type="text" id="wordInput" placeholder="Type a word...">
        <button id="searchBtn">Search</button>
    </div>
    <div id="definitionOutput" class="dictionary-output"></div>
    <a href="dashboard.html" class="back-home">â¬… Back to Home</a>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const username = localStorage.getItem('planner_username') || "Student";
    document.getElementById('userName').textContent = username;

    const searchBtn = document.getElementById('searchBtn');
    const wordInput = document.getElementById('wordInput');
    const output = document.getElementById('definitionOutput');

    searchBtn.addEventListener('click', async () => {
        const word = wordInput.value.trim();
        if(!word){ alert("Please type a word"); return; }

        output.innerHTML = "<p>Loading...</p>";

        try {
            const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
            if(!response.ok) throw new Error("Word not found");
            const data = await response.json();

            const meanings = data[0].meanings;
            const phonetic = data[0].phonetic || data[0].phonetics[0]?.text || "";
            const audio = data[0].phonetics[0]?.audio || "";

            let html = `<h3>${word} ${phonetic ? '('+phonetic+')' : ''}</h3>`;
            if(audio) html += `<audio controls src="${audio}"></audio>`;

            meanings.forEach(meaning => {
                html += `<p><strong>${meaning.partOfSpeech}:</strong></p>`;
                meaning.definitions.forEach((def,i)=>{
                    html += `<p>${i+1}. ${def.definition}</p>`;
                    if(def.example) html += `<p><em>Example: ${def.example}</em></p>`;
                    if(def.synonyms && def.synonyms.length>0) html += `<p>Synonyms: ${def.synonyms.join(', ')}</p>`;
                });
            });

            output.innerHTML = html;
        } catch(err){
            output.innerHTML = `<p style="color:red;">Word not found. Try another word.</p>`;
        }
    });
});

// Sidebar
function openSidebar(){ document.getElementById("mySidebar").style.width="250px"; }
function closeSidebar(){ document.getElementById("mySidebar").style.width="0"; }
function toggleTheme(){ document.body.classList.toggle('dark-theme'); }
</script>

</body>
</html>
