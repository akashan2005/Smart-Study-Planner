<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Study Planner - Study Friends</title>
<style>
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    overflow: hidden;
}
video.bg-video {
    position: fixed;
    top:0; left:0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1;
}
.content {
    background: rgba(255,255,255,0.85);
    max-width: 900px;
    margin: 20px auto;
    padding: 20px;
    border-radius: 15px;
    overflow-y: auto;
    height: 90vh;
}
.header { display:flex; justify-content: space-between; align-items:center; }
.menu-icon { cursor:pointer; font-size:24px; }
.sidebar { width:0; position:fixed; top:0; left:0; height:100%; background:#111; overflow-x:hidden; transition:0.3s; padding-top:60px; z-index:10; }
.sidebar a { padding:10px 20px; text-decoration:none; font-size:20px; color:#fff; display:block; transition:0.3s; }
.sidebar a:hover { background:#575757; }
.close-btn { position:absolute; top:10px; right:20px; font-size:36px; }
.friends-input-container input, .friends-input-container button, .chat-input-container input, .chat-input-container button {
    margin:5px; padding:8px; border-radius:6px; border:none; font-size:16px;
}
.friend-item, .group-item { display:flex; justify-content: space-between; align-items:center; padding:5px; border-bottom:1px solid #ccc; }
.chat-window { border:1px solid #ccc; border-radius:10px; padding:10px; margin-top:10px; max-height:200px; overflow-y:auto; background:#f9f9f9; }
.chat-message { margin:5px 0; }
.chat-sender { font-weight:bold; margin-right:5px; }
.back-home { display:inline-block; margin-top:10px; padding:8px 15px; background:#0077b6; color:#fff; border-radius:8px; text-decoration:none; }
.back-home:hover { background:#023e8a; }
</style>
</head>
<body>

<video autoplay muted loop class="bg-video">
    <source src="Page.mp4" type="video/mp4">
</video>

<div class="header">
    <div class="user-info">Welcome, <span id="userName"></span>!</div>
    <div class="menu-icon" onclick="openSidebar()">&#9776;</div>
</div>

<div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="close-btn" onclick="closeSidebar()">&times;</a>
    <a href="dashboard.html">Home</a>
    <a href="#" onclick="toggleTheme()">Theme</a>
    <a href="profile.html">Profile</a>
    <a href="help.html">Help</a>
</div>

<div class="content">
    <h1>My Study Friends</h1>
    <div class="friends-input-container">
        <input type="text" id="friendName" placeholder="Friend's name">
        <input type="text" id="friendNumber" placeholder="Phone/ID (optional)">
        <button id="addFriendBtn">Add Friend</button>
    </div>
    <div id="friendsList"></div>

    <div class="groups-container">
        <h3>Groups</h3>
        <input type="text" id="groupName" placeholder="Group Name">
        <button id="createGroupBtn">Create Group</button>
        <div id="groupsList"></div>
    </div>

    <div class="chat-container">
        <h3>Chat Window</h3>
        <div class="chat-window" id="chatWindow"></div>
        <div class="chat-input-container">
            <input type="text" id="chatInput" placeholder="Type message...">
            <button id="sendMsgBtn">Send</button>
            <input type="file" id="fileInput">
            <button id="emojiBtn">ðŸ˜Š</button>
            <button id="callBtn">ðŸ“ž Call</button>
        </div>
    </div>

    <a href="dashboard.html" class="back-home">â¬… Back to Home</a>
</div>

<script>
// Sidebar
function openSidebar(){ document.getElementById("mySidebar").style.width="250px"; }
function closeSidebar(){ document.getElementById("mySidebar").style.width="0"; }

// Theme toggle (dummy)
function toggleTheme(){ document.body.classList.toggle('dark-theme'); }

// Username demo
document.addEventListener('DOMContentLoaded', ()=>{ 
    const username = localStorage.getItem('planner_username') || "Student"; 
    document.getElementById('userName').textContent = username;
});

// Friends
const friendsList = document.getElementById('friendsList');
document.getElementById('addFriendBtn').addEventListener('click', ()=>{
    const name = document.getElementById('friendName').value;
    const number = document.getElementById('friendNumber').value;
    if(!name) return alert("Enter friend name!");
    const div = document.createElement('div'); 
    div.className="friend-item"; 
    div.innerHTML=`<span>${name} ${number?`(${number})`:''}</span> <button onclick="startChat('${name}')">Chat ðŸ’¬</button>`; 
    friendsList.appendChild(div);
    document.getElementById('friendName').value=''; document.getElementById('friendNumber').value='';
});

// Groups
const groupsList = document.getElementById('groupsList');
document.getElementById('createGroupBtn').addEventListener('click', ()=>{
    const name = document.getElementById('groupName').value;
    if(!name) return alert("Enter group name!");
    const div = document.createElement('div'); 
    div.className="group-item"; 
    div.innerHTML=`<span>${name}</span> <button onclick="startGroupChat('${name}')">Open Chat ðŸ’¬</button>`; 
    groupsList.appendChild(div);
    document.getElementById('groupName').value='';
});

// Chat
const chatWindow = document.getElementById('chatWindow');
document.getElementById('sendMsgBtn').addEventListener('click', sendMsg);
document.getElementById('emojiBtn').addEventListener('click', ()=>{ chatWindow.innerHTML+=`<div class="chat-message">ðŸ˜Š</div>`; chatWindow.scrollTop = chatWindow.scrollHeight; });
document.getElementById('callBtn').addEventListener('click', ()=>{ alert("Calling feature coming soon!"); });
document.getElementById('fileInput').addEventListener('change', (e)=>{
    const file = e.target.files[0];
    if(file){ chatWindow.innerHTML+=`<div class="chat-message">ðŸ“Ž ${file.name}</div>`; chatWindow.scrollTop = chatWindow.scrollHeight; }
});

function sendMsg(){
    const msg = document.getElementById('chatInput').value;
    if(!msg) return;
    chatWindow.innerHTML+=`<div class="chat-message"><span class="chat-sender">You:</span> <span class="chat-text">${msg}</span></div>`;
    document.getElementById('chatInput').value='';
    chatWindow.scrollTop = chatWindow.scrollHeight;
}

function startChat(name){
    chatWindow.innerHTML=`<div class="chat-message"><strong>Chat with ${name}</strong></div>`;
}

function startGroupChat(name){
    chatWindow.innerHTML=`<div class="chat-message"><strong>Group: ${name}</strong></div>`;
}
</script>

</body>
</html>
